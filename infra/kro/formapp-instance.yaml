# formapp-instance.yaml
apiVersion: kro.run/v1alpha1
kind: FormApp
metadata:
  name: formapp-complete-instance
  namespace: kro-apps
spec:
  name: formapp-stack
  # The application configuration
  app:
    enabled: true
    name: form-app
    image: moses101/form-app:latest
    replicas: 4
    service:
      type: LoadBalancer
      port: 8086
      targetPort: 8086
  # The database configuration
  database:
    enabled: true
    name: postgres
    image: bitnami/postgresql:12.1.0
    replicas: 3
    dbName: formdb
    username: postgres
    password: postgres
    service:
      port: 5432
      targetPort: 5432
    # Persistent storage configuration
    storage:
      enabled: true
      storageClass: longhorn
      size: 3Gi
      accessMode: ReadWriteOnce
  ingress:
    enabled: false


